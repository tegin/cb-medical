<?xml version="1.0" encoding="utf-8"?>

<!--
    Copyright 2017 Eficent Business and IT Consulting Services, S.L.
    Copyright 2017 Creu Blanca
    License LGPL-3.0 or later (https://www.gnu.org/licenses/lgpl.html).
-->

<odoo>

    <record id="medical_encounter_view_form" model="ir.ui.view">
        <field name="name">medical.encounter.view.form</field>
        <field name="model">medical.encounter</field>
        <field name="inherit_id"
               ref="medical_administration_encounter.medical_encounter_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//div[@name='button_box']" postion="inside">
                <field name="validation_status" invisible="1"/>
                <button name="admin_validate"
                        type="object"
                        icon="fa-check"
                        string="Validate"
                        group="group_medical_encounter_validation"
                        attrs="{'invisible': [('validation_status', '!=', 'in_progress')]}"
                />
                <button name="close_view"
                        type="object"
                        icon="fa-times"
                        string="Close"
                />
            </xpath>
            <group name="location_id" position="after">
                <notebook>
                    <sheet name="sale_order" string="Sale Orders">
                        <field name="sale_order_line_ids">
                            <tree create="false" delete="false" editable="bottom"
                                  decoration-muted="is_private==True"
                                  decoration-warnging="is_private == False and authorization_status != 'authorized'"
                            >
                                <field name="is_private" widget="toggle_button"
                                       readonly="True"/>
                                <field name="payor_id"/>
                                <field name="order_partner_id"/>
                                <field name="coverage_template_id"/>
                                <field name="patient_name" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="product_id" readonly="True"/>
                                <field name="product_uom_qty" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="price_unit" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="price_total" readonly="1" sum="Total"/>
                                <field name="subscriber_id" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="authorization_number" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="authorization_status"/>
                                <field name="state" invisible="1"/>
                                <field name="agents" invisible="1"/>
                                <!---->
                            </tree>
                        </field>
                    </sheet>
                </notebook>
            </group>
        </field>
    </record>
</odoo>
